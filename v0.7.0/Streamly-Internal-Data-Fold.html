<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Streamly.Internal.Data.Fold</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Streamly.Internal.Data.Fold.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">streamly-v0.7.0: Beautiful Streaming, Concurrent and Reactive Composition</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) 2019 Composewell Technologies<br />(c) 2013 Gabriel Gonzalez</td></tr><tr><th>License</th><td>BSD3</td></tr><tr><th>Maintainer</th><td>streamly@composewell.com</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Portability</th><td>GHC</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Streamly.Internal.Data.Fold</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Fold Type</a></li><li><a href="#g:2">Fold Creation Utilities</a><ul><li><a href="#g:3">Full Folds</a></li><li><a href="#g:4">Full Folds (Monoidal)</a></li><li><a href="#g:5">Full Folds (To Containers)</a></li><li><a href="#g:6">Partial Folds</a></li></ul></li><li><a href="#g:7">Transformations</a><ul><li><a href="#g:8">Covariant Operations</a></li><li><a href="#g:9">Mapping</a></li><li><a href="#g:10">Filtering</a></li></ul></li><li><a href="#g:11">Parsing</a><ul><li><a href="#g:12">Trimming</a></li></ul></li><li><a href="#g:13">Distributing</a></li><li><a href="#g:14">Partitioning</a></li><li><a href="#g:15">Demultiplexing</a></li><li><a href="#g:16">Classifying</a></li><li><a href="#g:17">Unzipping</a></li><li><a href="#g:18">Running Folds</a></li><li><a href="#g:19">Nested Folds</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc empty">&nbsp;</div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Fold">Fold</a> m a b = <a href="#v:Fold">Fold</a> (s -&gt; a -&gt; m s) (m s) (s -&gt; m b)</li><li class="src short"><a href="#v:hoist">hoist</a> :: (<span class="keyword">forall</span> x. m x -&gt; n x) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> n a b</li><li class="src short"><a href="#v:generally">generally</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Functor-Identity.html#t:Identity" title="Data.Functor.Identity">Identity</a> a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b</li><li class="src short"><a href="#v:mkPure">mkPure</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (s -&gt; a -&gt; s) -&gt; s -&gt; (s -&gt; b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b</li><li class="src short"><a href="#v:mkPureId">mkPureId</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; a -&gt; b) -&gt; b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b</li><li class="src short"><a href="#v:mkFold">mkFold</a> :: (s -&gt; a -&gt; m s) -&gt; m s -&gt; (s -&gt; m b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b</li><li class="src short"><a href="#v:mkFoldId">mkFoldId</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; a -&gt; m b) -&gt; m b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b</li><li class="src short"><a href="#v:drain">drain</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a ()</li><li class="src short"><a href="#v:drainBy">drainBy</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a ()</li><li class="src short"><a href="#v:drainBy2">drainBy2</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m b) -&gt; <a href="Streamly-Internal-Data-Fold-Types.html#t:Fold2" title="Streamly.Internal.Data.Fold.Types">Fold2</a> m c a ()</li><li class="src short"><a href="#v:last">last</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:length">length</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li class="src short"><a href="#v:sum">sum</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Num" title="Prelude">Num</a> a) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a a</li><li class="src short"><a href="#v:product">product</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Num" title="Prelude">Num</a> a) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a a</li><li class="src short"><a href="#v:maximumBy">maximumBy</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; a -&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Ord.html#t:Ordering" title="Data.Ord">Ordering</a>) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:maximum">maximum</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> a) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:minimumBy">minimumBy</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; a -&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Ord.html#t:Ordering" title="Data.Ord">Ordering</a>) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:minimum">minimum</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> a) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:mean">mean</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Fractional" title="Prelude">Fractional</a> a) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a a</li><li class="src short"><a href="#v:variance">variance</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Fractional" title="Prelude">Fractional</a> a) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a a</li><li class="src short"><a href="#v:stdDev">stdDev</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Numeric.html#t:Floating" title="Numeric">Floating</a> a) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a a</li><li class="src short"><a href="#v:rollingHash">rollingHash</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Enum" title="Prelude">Enum</a> a) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li class="src short"><a href="#v:rollingHashWithSalt">rollingHashWithSalt</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Enum" title="Prelude">Enum</a> a) =&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li class="src short"><a href="#v:mconcat">mconcat</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> a) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a a</li><li class="src short"><a href="#v:foldMap">foldMap</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> b) =&gt; (a -&gt; b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b</li><li class="src short"><a href="#v:foldMapM">foldMapM</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> b) =&gt; (a -&gt; m b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b</li><li class="src short"><a href="#v:toList">toList</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a [a]</li><li class="src short"><a href="#v:toListRevF">toListRevF</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a [a]</li><li class="src short"><a href="#v:index">index</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:head">head</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:find">find</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:lookup">lookup</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; a -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (a, b) (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> b)</li><li class="src short"><a href="#v:findIndex">findIndex</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a>)</li><li class="src short"><a href="#v:elemIndex">elemIndex</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; a -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a>)</li><li class="src short"><a href="#v:null">null</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:elem">elem</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; a -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:notElem">notElem</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; a -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:all">all</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:any">any</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:and">and</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:or">or</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:sequence">sequence</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (m b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b</li><li class="src short"><a href="#v:mapM">mapM</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; m c) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c</li><li class="src short"><a href="#v:transform">transform</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Pipe-Types.html#t:Pipe" title="Streamly.Internal.Data.Pipe.Types">Pipe</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b c -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c</li><li class="src short"><a href="#v:lmap">lmap</a> :: (a -&gt; b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b r -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a r</li><li class="src short"><a href="#v:lmapM">lmapM</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b r -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a r</li><li class="src short"><a href="#v:lfilter">lfilter</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a r -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a r</li><li class="src short"><a href="#v:lfilterM">lfilterM</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a r -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a r</li><li class="src short"><a href="#v:lcatMaybes">lcatMaybes</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> a) b</li><li class="src short"><a href="#v:ltake">ltake</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b</li><li class="src short"><a href="#v:ltakeWhile">ltakeWhile</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b</li><li class="src short"><a href="#v:lsessionsOf">lsessionsOf</a> :: <a href="Streamly-Internal-Data-SVar.html#t:MonadAsync" title="Streamly.Internal.Data.SVar">MonadAsync</a> m =&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Double" title="Prelude">Double</a> -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b c -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c</li><li class="src short"><a href="#v:lchunksOf">lchunksOf</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b c -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c</li><li class="src short"><a href="#v:tee">tee</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (b, c)</li><li class="src short"><a href="#v:distribute">distribute</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; [<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b] -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a [b]</li><li class="src short"><a href="#v:partition">partition</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b x -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m c y -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Either.html#t:Either" title="Data.Either">Either</a> b c) (x, y)</li><li class="src short"><a href="#v:demux">demux</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k) =&gt; <a href="https://hackage.haskell.org/package/containers-0.6.0.1/docs/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> k (<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (k, a) (<a href="https://hackage.haskell.org/package/containers-0.6.0.1/docs/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> k b)</li><li class="src short"><a href="#v:demux_">demux_</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k) =&gt; <a href="https://hackage.haskell.org/package/containers-0.6.0.1/docs/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> k (<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a ()) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (k, a) ()</li><li class="src short"><a href="#v:classify">classify</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (k, a) (<a href="https://hackage.haskell.org/package/containers-0.6.0.1/docs/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> k b)</li><li class="src short"><a href="#v:unzip">unzip</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a x -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b y -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (a, b) (x, y)</li><li class="src short"><a href="#v:initialize">initialize</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; m (<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b)</li><li class="src short"><a href="#v:runStep">runStep</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; a -&gt; m (<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b)</li><li class="src short"><a href="#v:duplicate">duplicate</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b)</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Fold Type</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Fold" class="def">Fold</a> m a b <a href="src/Streamly.Internal.Data.Fold.Types.html#Fold" class="link">Source</a> <a href="#t:Fold" class="selflink">#</a></p><div class="doc"><p>Represents a left fold over an input stream of values of type <code>a</code> to a
 single value of type <code>b</code> in <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a></code> <code>m</code>.</p><p>The fold uses an intermediate state <code>s</code> as accumulator. The <code>step</code> function
 updates the state and returns the new updated state. When the fold is done
 the final result of the fold is extracted from the intermediate state
 representation using the <code>extract</code> function.</p><p><em>Since: 0.7.0</em></p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Fold" class="def">Fold</a> (s -&gt; a -&gt; m s) (m s) (s -&gt; m b)</td><td class="doc"><p><code>Fold </code> <code> step </code> <code> initial </code> <code> extract</code></p></td></tr></table></div><div class="subs instances"><details id="i:Fold" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Fold:Functor:1"></span> <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> m =&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> (<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a)</span> <a href="src/Streamly.Internal.Data.Fold.Types.html#line-83" class="link">Source</a> <a href="#t:Fold" class="selflink">#</a></td><td class="doc"><p>Maps a function on the output of the fold (the type <code>b</code>).</p></td></tr><tr><td colspan="2"><details id="i:id:Fold:Functor:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Streamly-Internal-Data-Fold-Types.html">Streamly.Internal.Data.Fold.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a0 -&gt; b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a a0 -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a0 -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a a0 <a href="#v:-60--36-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Fold:Applicative:2"></span> <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> m =&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> (<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a)</span> <a href="src/Streamly.Internal.Data.Fold.Types.html#line-94" class="link">Source</a> <a href="#t:Fold" class="selflink">#</a></td><td class="doc"><p>The fold resulting from <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Applicative.html#v:-60--42--62-" title="Control.Applicative">&lt;*&gt;</a></code> distributes its input to both the argument
 folds and combines their output using the supplied function.</p></td></tr><tr><td colspan="2"><details id="i:id:Fold:Applicative:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Streamly-Internal-Data-Fold-Types.html">Streamly.Internal.Data.Fold.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pure">pure</a> :: a0 -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a a0 <a href="#v:pure" class="selflink">#</a></p><p class="src"><a href="#v:-60--42--62-">(&lt;*&gt;)</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (a0 -&gt; b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a a0 -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:-60--42--62-" class="selflink">#</a></p><p class="src"><a href="#v:liftA2">liftA2</a> :: (a0 -&gt; b -&gt; c) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a a0 -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c <a href="#v:liftA2" class="selflink">#</a></p><p class="src"><a href="#v:-42--62-">(*&gt;)</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a a0 -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:-42--62-" class="selflink">#</a></p><p class="src"><a href="#v:-60--42-">(&lt;*)</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a a0 -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a a0 <a href="#v:-60--42-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Fold:Floating:3"></span> (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Numeric.html#t:Floating" title="Numeric">Floating</a> b) =&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Numeric.html#t:Floating" title="Numeric">Floating</a> (<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b)</span> <a href="src/Streamly.Internal.Data.Fold.Types.html#line-161" class="link">Source</a> <a href="#t:Fold" class="selflink">#</a></td><td class="doc"><p>Combines the fold outputs using their <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Numeric.html#t:Floating" title="Numeric">Floating</a></code> instances.</p></td></tr><tr><td colspan="2"><details id="i:id:Fold:Floating:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Streamly-Internal-Data-Fold-Types.html">Streamly.Internal.Data.Fold.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pi">pi</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:pi" class="selflink">#</a></p><p class="src"><a href="#v:exp">exp</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:exp" class="selflink">#</a></p><p class="src"><a href="#v:log">log</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:log" class="selflink">#</a></p><p class="src"><a href="#v:sqrt">sqrt</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:sqrt" class="selflink">#</a></p><p class="src"><a href="#v:-42--42-">(**)</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:-42--42-" class="selflink">#</a></p><p class="src"><a href="#v:logBase">logBase</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:logBase" class="selflink">#</a></p><p class="src"><a href="#v:sin">sin</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:sin" class="selflink">#</a></p><p class="src"><a href="#v:cos">cos</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:cos" class="selflink">#</a></p><p class="src"><a href="#v:tan">tan</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:tan" class="selflink">#</a></p><p class="src"><a href="#v:asin">asin</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:asin" class="selflink">#</a></p><p class="src"><a href="#v:acos">acos</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:acos" class="selflink">#</a></p><p class="src"><a href="#v:atan">atan</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:atan" class="selflink">#</a></p><p class="src"><a href="#v:sinh">sinh</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:sinh" class="selflink">#</a></p><p class="src"><a href="#v:cosh">cosh</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:cosh" class="selflink">#</a></p><p class="src"><a href="#v:tanh">tanh</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:tanh" class="selflink">#</a></p><p class="src"><a href="#v:asinh">asinh</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:asinh" class="selflink">#</a></p><p class="src"><a href="#v:acosh">acosh</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:acosh" class="selflink">#</a></p><p class="src"><a href="#v:atanh">atanh</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:atanh" class="selflink">#</a></p><p class="src"><a href="#v:log1p">log1p</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:log1p" class="selflink">#</a></p><p class="src"><a href="#v:expm1">expm1</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:expm1" class="selflink">#</a></p><p class="src"><a href="#v:log1pexp">log1pexp</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:log1pexp" class="selflink">#</a></p><p class="src"><a href="#v:log1mexp">log1mexp</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:log1mexp" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Fold:Fractional:4"></span> (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Fractional" title="Prelude">Fractional</a> b) =&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Fractional" title="Prelude">Fractional</a> (<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b)</span> <a href="src/Streamly.Internal.Data.Fold.Types.html#line-150" class="link">Source</a> <a href="#t:Fold" class="selflink">#</a></td><td class="doc"><p>Combines the fold outputs (type <code>b</code>) using their <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Fractional" title="Prelude">Fractional</a></code> instances.</p></td></tr><tr><td colspan="2"><details id="i:id:Fold:Fractional:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Streamly-Internal-Data-Fold-Types.html">Streamly.Internal.Data.Fold.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-47-">(/)</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:-47-" class="selflink">#</a></p><p class="src"><a href="#v:recip">recip</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:recip" class="selflink">#</a></p><p class="src"><a href="#v:fromRational">fromRational</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Rational" title="Prelude">Rational</a> -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:fromRational" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Fold:Num:5"></span> (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Num" title="Prelude">Num</a> b) =&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Num" title="Prelude">Num</a> (<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b)</span> <a href="src/Streamly.Internal.Data.Fold.Types.html#line-127" class="link">Source</a> <a href="#t:Fold" class="selflink">#</a></td><td class="doc"><p>Combines the fold outputs (type <code>b</code>) using their <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Num" title="Prelude">Num</a></code> instances.</p></td></tr><tr><td colspan="2"><details id="i:id:Fold:Num:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Streamly-Internal-Data-Fold-Types.html">Streamly.Internal.Data.Fold.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-43-">(+)</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:-43-" class="selflink">#</a></p><p class="src"><a href="#v:-45-">(-)</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:-45-" class="selflink">#</a></p><p class="src"><a href="#v:-42-">(*)</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:-42-" class="selflink">#</a></p><p class="src"><a href="#v:negate">negate</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:negate" class="selflink">#</a></p><p class="src"><a href="#v:abs">abs</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:abs" class="selflink">#</a></p><p class="src"><a href="#v:signum">signum</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:signum" class="selflink">#</a></p><p class="src"><a href="#v:fromInteger">fromInteger</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Integer" title="Prelude">Integer</a> -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:fromInteger" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Fold:Semigroup:6"></span> (<a href="Streamly.html#t:Semigroup" title="Streamly">Semigroup</a> b, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; <a href="Streamly.html#t:Semigroup" title="Streamly">Semigroup</a> (<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b)</span> <a href="src/Streamly.Internal.Data.Fold.Types.html#line-113" class="link">Source</a> <a href="#t:Fold" class="selflink">#</a></td><td class="doc"><p>Combines the outputs of the folds (the type <code>b</code>) using their <code><a href="Streamly.html#t:Semigroup" title="Streamly">Semigroup</a></code>
 instances.</p></td></tr><tr><td colspan="2"><details id="i:id:Fold:Semigroup:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Streamly-Internal-Data-Fold-Types.html">Streamly.Internal.Data.Fold.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-60--62-">(&lt;&gt;)</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:-60--62-" class="selflink">#</a></p><p class="src"><a href="#v:sconcat">sconcat</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> (<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:sconcat" class="selflink">#</a></p><p class="src"><a href="#v:stimes">stimes</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Integral" title="Prelude">Integral</a> b0 =&gt; b0 -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:stimes" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Fold:Monoid:7"></span> (<a href="Streamly.html#t:Semigroup" title="Streamly">Semigroup</a> b, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> b, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> (<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b)</span> <a href="src/Streamly.Internal.Data.Fold.Types.html#line-119" class="link">Source</a> <a href="#t:Fold" class="selflink">#</a></td><td class="doc"><p>Combines the outputs of the folds (the type <code>b</code>) using their <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a></code>
 instances.</p></td></tr><tr><td colspan="2"><details id="i:id:Fold:Monoid:7"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Streamly-Internal-Data-Fold-Types.html">Streamly.Internal.Data.Fold.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mempty">mempty</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:mempty" class="selflink">#</a></p><p class="src"><a href="#v:mappend">mappend</a> :: <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:mappend" class="selflink">#</a></p><p class="src"><a href="#v:mconcat">mconcat</a> :: [<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b] -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="#v:mconcat" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:hoist" class="def">hoist</a> :: (<span class="keyword">forall</span> x. m x -&gt; n x) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> n a b <a href="src/Streamly.Internal.Data.Fold.html#hoist" class="link">Source</a> <a href="#v:hoist" class="selflink">#</a></p><div class="doc"><p>Change the underlying monad of a fold</p><p><em>Internal</em></p></div></div><div class="top"><p class="src"><a id="v:generally" class="def">generally</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Functor-Identity.html#t:Identity" title="Data.Functor.Identity">Identity</a> a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="src/Streamly.Internal.Data.Fold.html#generally" class="link">Source</a> <a href="#v:generally" class="selflink">#</a></p><div class="doc"><p>Adapt a pure fold to any monad</p><pre>generally = hoist (return . runIdentity)</pre><p><em>Internal</em></p></div></div><a href="#g:2" id="g:2"><h1>Fold Creation Utilities</h1></a><div class="top"><p class="src"><a id="v:mkPure" class="def">mkPure</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (s -&gt; a -&gt; s) -&gt; s -&gt; (s -&gt; b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="src/Streamly.Internal.Data.Fold.html#mkPure" class="link">Source</a> <a href="#v:mkPure" class="selflink">#</a></p><div class="doc"><p>Make a fold using a pure step function, a pure initial state and
 a pure state extraction function.</p><p><em>Internal</em></p></div></div><div class="top"><p class="src"><a id="v:mkPureId" class="def">mkPureId</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; a -&gt; b) -&gt; b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="src/Streamly.Internal.Data.Fold.html#mkPureId" class="link">Source</a> <a href="#v:mkPureId" class="selflink">#</a></p><div class="doc"><p>Make a fold using a pure step function and a pure initial state. The
 final state extracted is identical to the intermediate state.</p><p><em>Internal</em></p></div></div><div class="top"><p class="src"><a id="v:mkFold" class="def">mkFold</a> :: (s -&gt; a -&gt; m s) -&gt; m s -&gt; (s -&gt; m b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="src/Streamly.Internal.Data.Fold.html#mkFold" class="link">Source</a> <a href="#v:mkFold" class="selflink">#</a></p><div class="doc"><p>Make a fold with an effectful step function and initial state, and a state
 extraction function.</p><pre>mkFold = Fold</pre><p>We can just use <code><a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a></code> but it is provided for completeness.</p><p><em>Internal</em></p></div></div><div class="top"><p class="src"><a id="v:mkFoldId" class="def">mkFoldId</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; a -&gt; m b) -&gt; m b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="src/Streamly.Internal.Data.Fold.html#mkFoldId" class="link">Source</a> <a href="#v:mkFoldId" class="selflink">#</a></p><div class="doc"><p>Make a fold with an effectful step function and initial state.  The final
 state extracted is identical to the intermediate state.</p><p><em>Internal</em></p></div></div><a href="#g:3" id="g:3"><h2>Full Folds</h2></a><div class="top"><p class="src"><a id="v:drain" class="def">drain</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a () <a href="src/Streamly.Internal.Data.Fold.html#drain" class="link">Source</a> <a href="#v:drain" class="selflink">#</a></p><div class="doc"><p>A fold that drains all its input, running the effects and discarding the
 results.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:drainBy" class="def">drainBy</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a () <a href="src/Streamly.Internal.Data.Fold.html#drainBy" class="link">Source</a> <a href="#v:drainBy" class="selflink">#</a></p><div class="doc"><pre>drainBy f = lmapM f drain</pre><p>Drain all input after passing it through a monadic function. This is the
 dual of mapM_ on stream producers.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:drainBy2" class="def">drainBy2</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m b) -&gt; <a href="Streamly-Internal-Data-Fold-Types.html#t:Fold2" title="Streamly.Internal.Data.Fold.Types">Fold2</a> m c a () <a href="src/Streamly.Internal.Data.Fold.html#drainBy2" class="link">Source</a> <a href="#v:drainBy2" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:last" class="def">last</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> a) <a href="src/Streamly.Internal.Data.Fold.html#last" class="link">Source</a> <a href="#v:last" class="selflink">#</a></p><div class="doc"><p>Extract the last element of the input stream, if any.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:length" class="def">length</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="src/Streamly.Internal.Data.Fold.html#length" class="link">Source</a> <a href="#v:length" class="selflink">#</a></p><div class="doc"><p>Determine the length of the input stream.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:sum" class="def">sum</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Num" title="Prelude">Num</a> a) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a a <a href="src/Streamly.Internal.Data.Fold.html#sum" class="link">Source</a> <a href="#v:sum" class="selflink">#</a></p><div class="doc"><p>Determine the sum of all elements of a stream of numbers. Returns additive
 identity (<code>0</code>) when the stream is empty. Note that this is not numerically
 stable for floating point numbers.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:product" class="def">product</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Num" title="Prelude">Num</a> a) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a a <a href="src/Streamly.Internal.Data.Fold.html#product" class="link">Source</a> <a href="#v:product" class="selflink">#</a></p><div class="doc"><p>Determine the product of all elements of a stream of numbers. Returns
 multiplicative identity (<code>1</code>) when the stream is empty.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:maximumBy" class="def">maximumBy</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; a -&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Ord.html#t:Ordering" title="Data.Ord">Ordering</a>) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> a) <a href="src/Streamly.Internal.Data.Fold.html#maximumBy" class="link">Source</a> <a href="#v:maximumBy" class="selflink">#</a></p><div class="doc"><p>Determine the maximum element in a stream using the supplied comparison
 function.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:maximum" class="def">maximum</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> a) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> a) <a href="src/Streamly.Internal.Data.Fold.html#maximum" class="link">Source</a> <a href="#v:maximum" class="selflink">#</a></p><div class="doc"><pre>maximum = <code><a href="Streamly-Internal-Data-Fold.html#v:maximumBy" title="Streamly.Internal.Data.Fold">maximumBy</a></code> compare
</pre><p>Determine the maximum element in a stream.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:minimumBy" class="def">minimumBy</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; a -&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Ord.html#t:Ordering" title="Data.Ord">Ordering</a>) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> a) <a href="src/Streamly.Internal.Data.Fold.html#minimumBy" class="link">Source</a> <a href="#v:minimumBy" class="selflink">#</a></p><div class="doc"><p>Computes the minimum element with respect to the given comparison function</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:minimum" class="def">minimum</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> a) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> a) <a href="src/Streamly.Internal.Data.Fold.html#minimum" class="link">Source</a> <a href="#v:minimum" class="selflink">#</a></p><div class="doc"><p>Determine the minimum element in a stream using the supplied comparison
 function.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:mean" class="def">mean</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Fractional" title="Prelude">Fractional</a> a) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a a <a href="src/Streamly.Internal.Data.Fold.html#mean" class="link">Source</a> <a href="#v:mean" class="selflink">#</a></p><div class="doc"><p>Compute a numerically stable arithmetic mean of all elements in the input
 stream.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:variance" class="def">variance</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Fractional" title="Prelude">Fractional</a> a) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a a <a href="src/Streamly.Internal.Data.Fold.html#variance" class="link">Source</a> <a href="#v:variance" class="selflink">#</a></p><div class="doc"><p>Compute a numerically stable (population) variance over all elements in
 the input stream.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:stdDev" class="def">stdDev</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Numeric.html#t:Floating" title="Numeric">Floating</a> a) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a a <a href="src/Streamly.Internal.Data.Fold.html#stdDev" class="link">Source</a> <a href="#v:stdDev" class="selflink">#</a></p><div class="doc"><p>Compute a numerically stable (population) standard deviation over all
 elements in the input stream.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:rollingHash" class="def">rollingHash</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Enum" title="Prelude">Enum</a> a) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="src/Streamly.Internal.Data.Fold.html#rollingHash" class="link">Source</a> <a href="#v:rollingHash" class="selflink">#</a></p><div class="doc"><p>Compute an <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a></code> sized polynomial rolling hash of a stream.</p><pre>rollingHash = rollingHashWithSalt defaultSalt</pre><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:rollingHashWithSalt" class="def">rollingHashWithSalt</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Enum" title="Prelude">Enum</a> a) =&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="src/Streamly.Internal.Data.Fold.html#rollingHashWithSalt" class="link">Source</a> <a href="#v:rollingHashWithSalt" class="selflink">#</a></p><div class="doc"><p>Compute an <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a></code> sized polynomial rolling hash</p><pre>H = salt * k ^ n + c1 * k ^ (n - 1) + c2 * k ^ (n - 2) + ... + cn * k ^ 0</pre><p>Where <code>c1</code>, <code>c2</code>, <code>cn</code> are the elements in the input stream and <code>k</code> is a
 constant.</p><p>This hash is often used in Rabin-Karp string search algorithm.</p><p>See <a href="https://en.wikipedia.org/wiki/Rolling_hash">https://en.wikipedia.org/wiki/Rolling_hash</a></p><p><em>Since: 0.7.0</em></p></div></div><a href="#g:4" id="g:4"><h2>Full Folds (Monoidal)</h2></a><div class="top"><p class="src"><a id="v:mconcat" class="def">mconcat</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> a) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a a <a href="src/Streamly.Internal.Data.Fold.html#mconcat" class="link">Source</a> <a href="#v:mconcat" class="selflink">#</a></p><div class="doc"><p>Fold an input stream consisting of monoidal elements using <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Monoid.html#v:mappend" title="Data.Monoid">mappend</a></code>
 and <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Monoid.html#v:mempty" title="Data.Monoid">mempty</a></code>.</p><pre>S.fold FL.mconcat (S.map Sum $ S.enumerateFromTo 1 10)</pre><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:foldMap" class="def">foldMap</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> b) =&gt; (a -&gt; b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="src/Streamly.Internal.Data.Fold.html#foldMap" class="link">Source</a> <a href="#v:foldMap" class="selflink">#</a></p><div class="doc"><pre>foldMap f = map f mconcat</pre><p>Make a fold from a pure function that folds the output of the function
 using <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Monoid.html#v:mappend" title="Data.Monoid">mappend</a></code> and <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Monoid.html#v:mempty" title="Data.Monoid">mempty</a></code>.</p><pre>S.fold (FL.foldMap Sum) $ S.enumerateFromTo 1 10</pre><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:foldMapM" class="def">foldMapM</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> b) =&gt; (a -&gt; m b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="src/Streamly.Internal.Data.Fold.html#foldMapM" class="link">Source</a> <a href="#v:foldMapM" class="selflink">#</a></p><div class="doc"><pre>foldMapM f = mapM f mconcat</pre><p>Make a fold from a monadic function that folds the output of the function
 using <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Monoid.html#v:mappend" title="Data.Monoid">mappend</a></code> and <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Monoid.html#v:mempty" title="Data.Monoid">mempty</a></code>.</p><pre>S.fold (FL.foldMapM (return . Sum)) $ S.enumerateFromTo 1 10</pre><p><em>Since: 0.7.0</em></p></div></div><a href="#g:5" id="g:5"><h2>Full Folds (To Containers)</h2></a><div class="top"><p class="src"><a id="v:toList" class="def">toList</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a [a] <a href="src/Streamly.Internal.Data.Fold.html#toList" class="link">Source</a> <a href="#v:toList" class="selflink">#</a></p><div class="doc"><p>Folds the input stream to a list.</p><p><em>Warning!</em> working on large lists accumulated as buffers in memory could be
 very inefficient, consider using <a href="Streamly-Array.html">Streamly.Array</a> instead.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:toListRevF" class="def">toListRevF</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a [a] <a href="src/Streamly.Internal.Data.Fold.Types.html#toListRevF" class="link">Source</a> <a href="#v:toListRevF" class="selflink">#</a></p><div class="doc"><p>Buffers the input stream to a list in the reverse order of the input.</p><p><em>Warning!</em> working on large lists accumulated as buffers in memory could be
 very inefficient, consider using <a href="Streamly-Array.html">Streamly.Array</a> instead.</p><p><em>Since: 0.7.0</em></p></div></div><a href="#g:6" id="g:6"><h2>Partial Folds</h2></a><div class="top"><p class="src"><a id="v:index" class="def">index</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> a) <a href="src/Streamly.Internal.Data.Fold.html#index" class="link">Source</a> <a href="#v:index" class="selflink">#</a></p><div class="doc"><p>Lookup the element at the given index.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:head" class="def">head</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> a) <a href="src/Streamly.Internal.Data.Fold.html#head" class="link">Source</a> <a href="#v:head" class="selflink">#</a></p><div class="doc"><p>Extract the first element of the stream, if any.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:find" class="def">find</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> a) <a href="src/Streamly.Internal.Data.Fold.html#find" class="link">Source</a> <a href="#v:find" class="selflink">#</a></p><div class="doc"><p>Returns the first element that satisfies the given predicate.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:lookup" class="def">lookup</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; a -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (a, b) (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> b) <a href="src/Streamly.Internal.Data.Fold.html#lookup" class="link">Source</a> <a href="#v:lookup" class="selflink">#</a></p><div class="doc"><p>In a stream of (key-value) pairs <code>(a, b)</code>, return the value <code>b</code> of the
 first pair where the key equals the given value <code>a</code>.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:findIndex" class="def">findIndex</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a>) <a href="src/Streamly.Internal.Data.Fold.html#findIndex" class="link">Source</a> <a href="#v:findIndex" class="selflink">#</a></p><div class="doc"><p>Returns the first index that satisfies the given predicate.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:elemIndex" class="def">elemIndex</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; a -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a>) <a href="src/Streamly.Internal.Data.Fold.html#elemIndex" class="link">Source</a> <a href="#v:elemIndex" class="selflink">#</a></p><div class="doc"><p>Returns the first index where a given value is found in the stream.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:null" class="def">null</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.Data.Fold.html#null" class="link">Source</a> <a href="#v:null" class="selflink">#</a></p><div class="doc"><p>Return <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#v:True" title="Data.Bool">True</a></code> if the input stream is empty.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:elem" class="def">elem</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; a -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.Data.Fold.html#elem" class="link">Source</a> <a href="#v:elem" class="selflink">#</a></p><div class="doc"><p>Return <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#v:True" title="Data.Bool">True</a></code> if the given element is present in the stream.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:notElem" class="def">notElem</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; a -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.Data.Fold.html#notElem" class="link">Source</a> <a href="#v:notElem" class="selflink">#</a></p><div class="doc"><p>Returns <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#v:True" title="Data.Bool">True</a></code> if the given element is not present in the stream.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:all" class="def">all</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.Data.Fold.html#all" class="link">Source</a> <a href="#v:all" class="selflink">#</a></p><div class="doc"><pre>all p = lmap p and</pre><p>| Returns <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#v:True" title="Data.Bool">True</a></code> if all elements of a stream satisfy a predicate.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:any" class="def">any</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.Data.Fold.html#any" class="link">Source</a> <a href="#v:any" class="selflink">#</a></p><div class="doc"><pre>any p = lmap p or</pre><p>| Returns <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#v:True" title="Data.Bool">True</a></code> if any of the elements of a stream satisfies a predicate.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:and" class="def">and</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.Data.Fold.html#and" class="link">Source</a> <a href="#v:and" class="selflink">#</a></p><div class="doc"><p>Returns <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#v:True" title="Data.Bool">True</a></code> if all elements are <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#v:True" title="Data.Bool">True</a></code>, <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#v:False" title="Data.Bool">False</a></code> otherwise</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:or" class="def">or</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.Data.Fold.html#or" class="link">Source</a> <a href="#v:or" class="selflink">#</a></p><div class="doc"><p>Returns <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#v:True" title="Data.Bool">True</a></code> if any element is <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#v:True" title="Data.Bool">True</a></code>, <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#v:False" title="Data.Bool">False</a></code> otherwise</p><p><em>Since: 0.7.0</em></p></div></div><a href="#g:7" id="g:7"><h1>Transformations</h1></a><a href="#g:8" id="g:8"><h2>Covariant Operations</h2></a><div class="top"><p class="src"><a id="v:sequence" class="def">sequence</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (m b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="src/Streamly.Internal.Data.Fold.html#sequence" class="link">Source</a> <a href="#v:sequence" class="selflink">#</a></p><div class="doc"><p>Flatten the monadic output of a fold to pure output.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:mapM" class="def">mapM</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; m c) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c <a href="src/Streamly.Internal.Data.Fold.html#mapM" class="link">Source</a> <a href="#v:mapM" class="selflink">#</a></p><div class="doc"><p>Map a monadic function on the output of a fold.</p><p><em>Since: 0.7.0</em></p></div></div><a href="#g:9" id="g:9"><h2>Mapping</h2></a><div class="top"><p class="src"><a id="v:transform" class="def">transform</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Pipe-Types.html#t:Pipe" title="Streamly.Internal.Data.Pipe.Types">Pipe</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b c -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c <a href="src/Streamly.Internal.Data.Fold.html#transform" class="link">Source</a> <a href="#v:transform" class="selflink">#</a></p><div class="doc"><p>Apply a transformation on a <code><a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a></code> using a <code><a href="Streamly-Internal-Data-Pipe-Types.html#t:Pipe" title="Streamly.Internal.Data.Pipe.Types">Pipe</a></code>.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:lmap" class="def">lmap</a> :: (a -&gt; b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b r -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a r <a href="src/Streamly.Internal.Data.Fold.Types.html#lmap" class="link">Source</a> <a href="#v:lmap" class="selflink">#</a></p><div class="doc"><p><code>(lmap f fold)</code> maps the function <code>f</code> on the input of the fold.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>S.fold (FL.lmap (\x -&gt; x * x) FL.sum) (S.enumerateFromTo 1 100)
</code></strong>338350
</pre><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:lmapM" class="def">lmapM</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b r -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a r <a href="src/Streamly.Internal.Data.Fold.Types.html#lmapM" class="link">Source</a> <a href="#v:lmapM" class="selflink">#</a></p><div class="doc"><p><code>(lmapM f fold)</code> maps the monadic function <code>f</code> on the input of the fold.</p><p><em>Since: 0.7.0</em></p></div></div><a href="#g:10" id="g:10"><h2>Filtering</h2></a><div class="top"><p class="src"><a id="v:lfilter" class="def">lfilter</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a r -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a r <a href="src/Streamly.Internal.Data.Fold.Types.html#lfilter" class="link">Source</a> <a href="#v:lfilter" class="selflink">#</a></p><div class="doc"><p>Include only those elements that pass a predicate.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>S.fold (lfilter (&gt; 5) FL.sum) [1..10]
</code></strong>40
</pre><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:lfilterM" class="def">lfilterM</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a r -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a r <a href="src/Streamly.Internal.Data.Fold.Types.html#lfilterM" class="link">Source</a> <a href="#v:lfilterM" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="Streamly-Internal-Data-Fold.html#v:lfilter" title="Streamly.Internal.Data.Fold">lfilter</a></code> but with a monadic predicate.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:lcatMaybes" class="def">lcatMaybes</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> a) b <a href="src/Streamly.Internal.Data.Fold.Types.html#lcatMaybes" class="link">Source</a> <a href="#v:lcatMaybes" class="selflink">#</a></p><div class="doc"><p>Transform a fold from a pure input to a <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a></code> input, consuming only
 <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#v:Just" title="GHC.Maybe">Just</a></code> values.</p></div></div><a href="#g:11" id="g:11"><h1>Parsing</h1></a><a href="#g:12" id="g:12"><h2>Trimming</h2></a><div class="top"><p class="src"><a id="v:ltake" class="def">ltake</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="src/Streamly.Internal.Data.Fold.Types.html#ltake" class="link">Source</a> <a href="#v:ltake" class="selflink">#</a></p><div class="doc"><p>Take first <code>n</code> elements from the stream and discard the rest.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:ltakeWhile" class="def">ltakeWhile</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b <a href="src/Streamly.Internal.Data.Fold.Types.html#ltakeWhile" class="link">Source</a> <a href="#v:ltakeWhile" class="selflink">#</a></p><div class="doc"><p>Takes elements from the input as long as the predicate succeeds.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:lsessionsOf" class="def">lsessionsOf</a> :: <a href="Streamly-Internal-Data-SVar.html#t:MonadAsync" title="Streamly.Internal.Data.SVar">MonadAsync</a> m =&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Double" title="Prelude">Double</a> -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b c -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c <a href="src/Streamly.Internal.Data.Fold.Types.html#lsessionsOf" class="link">Source</a> <a href="#v:lsessionsOf" class="selflink">#</a></p><div class="doc"><p>Group the input stream into windows of n second each and then fold each
 group using the provided fold function.</p><p>For example, we can copy and distribute a stream to multiple folds where
 each fold can group the input differently e.g. by one second, one minute and
 one hour windows respectively and fold each resulting stream of folds.</p><pre>
-----Fold m a b----|-Fold n a c-|-Fold n a c-|-...-|----Fold m a c

</pre></div></div><div class="top"><p class="src"><a id="v:lchunksOf" class="def">lchunksOf</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b c -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c <a href="src/Streamly.Internal.Data.Fold.Types.html#lchunksOf" class="link">Source</a> <a href="#v:lchunksOf" class="selflink">#</a></p><div class="doc"><p>For every n input items, apply the first fold and supply the result to the
 next fold.</p></div></div><a href="#g:13" id="g:13"><h1>Distributing</h1></a><div class="top"><p class="src"><a id="v:tee" class="def">tee</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a c -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (b, c) <a href="src/Streamly.Internal.Data.Fold.html#tee" class="link">Source</a> <a href="#v:tee" class="selflink">#</a></p><div class="doc"><p>Distribute one copy of the stream to each fold and zip the results.</p><pre>                |-------Fold m a b--------|
---stream m a---|                         |---m (b,c)
                |-------Fold m a c--------|
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>S.fold (FL.tee FL.sum FL.length) (S.enumerateFromTo 1.0 100.0)
</code></strong>(5050.0,100)
</pre><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:distribute" class="def">distribute</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; [<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b] -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a [b] <a href="src/Streamly.Internal.Data.Fold.html#distribute" class="link">Source</a> <a href="#v:distribute" class="selflink">#</a></p><div class="doc"><p>Distribute one copy of the stream to each fold and collect the results in
 a container.</p><pre>
                |-------Fold m a b--------|
---stream m a---|                         |---m [b]
                |-------Fold m a b--------|
                |                         |
                           ...
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>S.fold (FL.distribute [FL.sum, FL.length]) (S.enumerateFromTo 1 5)
</code></strong>[15,5]
</pre><p>This is the consumer side dual of the producer side <code><a href="Streamly-Internal-Data-Fold.html#v:sequence" title="Streamly.Internal.Data.Fold">sequence</a></code> operation.</p><p><em>Since: 0.7.0</em></p></div></div><a href="#g:14" id="g:14"><h1>Partitioning</h1></a><div class="top"><p class="src"><a id="v:partition" class="def">partition</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b x -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m c y -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Either.html#t:Either" title="Data.Either">Either</a> b c) (x, y) <a href="src/Streamly.Internal.Data.Fold.html#partition" class="link">Source</a> <a href="#v:partition" class="selflink">#</a></p><div class="doc"><p>Compose two folds such that the combined fold accepts a stream of <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Either.html#t:Either" title="Data.Either">Either</a></code>
 and routes the <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Either.html#v:Left" title="Data.Either">Left</a></code> values to the first fold and <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Either.html#v:Right" title="Data.Either">Right</a></code> values to the
 second fold.</p><pre>partition = partitionBy id</pre><p><em>Since: 0.7.0</em></p></div></div><a href="#g:15" id="g:15"><h1>Demultiplexing</h1></a><div class="top"><p class="src"><a id="v:demux" class="def">demux</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k) =&gt; <a href="https://hackage.haskell.org/package/containers-0.6.0.1/docs/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> k (<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (k, a) (<a href="https://hackage.haskell.org/package/containers-0.6.0.1/docs/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> k b) <a href="src/Streamly.Internal.Data.Fold.html#demux" class="link">Source</a> <a href="#v:demux" class="selflink">#</a></p><div class="doc"><p>Fold a stream of key value pairs using a map of specific folds for each
 key into a map from keys to the results of fold outputs of the corresponding
 values.</p><pre>&gt; let table = Data.Map.fromList [(&quot;SUM&quot;, FL.sum), (&quot;PRODUCT&quot;, FL.product)]
      input = S.fromList [(&quot;SUM&quot;,1),(&quot;PRODUCT&quot;,2),(&quot;SUM&quot;,3),(&quot;PRODUCT&quot;,4)]
  in S.fold (FL.demux table) input
One 1
Two 2
</pre><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:demux_" class="def">demux_</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k) =&gt; <a href="https://hackage.haskell.org/package/containers-0.6.0.1/docs/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> k (<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a ()) -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (k, a) () <a href="src/Streamly.Internal.Data.Fold.html#demux_" class="link">Source</a> <a href="#v:demux_" class="selflink">#</a></p><div class="doc"><p>Given a stream of key value pairs and a map from keys to folds, fold the
 values for each key using the corresponding folds, discarding the outputs.</p><pre>&gt; let prn = FL.drainBy print
&gt; let table = Data.Map.fromList [(&quot;ONE&quot;, prn), (&quot;TWO&quot;, prn)]
      input = S.fromList [(&quot;ONE&quot;,1),(&quot;TWO&quot;,2)]
  in S.fold (FL.demux_ table) input
One 1
Two 2
</pre><p><em>Since: 0.7.0</em></p></div></div><a href="#g:16" id="g:16"><h1>Classifying</h1></a><div class="top"><p class="src"><a id="v:classify" class="def">classify</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> k) =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (k, a) (<a href="https://hackage.haskell.org/package/containers-0.6.0.1/docs/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> k b) <a href="src/Streamly.Internal.Data.Fold.html#classify" class="link">Source</a> <a href="#v:classify" class="selflink">#</a></p><div class="doc"><p>Given an input stream of key value pairs and a fold for values, fold all
 the values belonging to each key.  Useful for map/reduce, bucketizing the
 input in different bins or for generating histograms.</p><pre>&gt; let input = S.fromList [(&quot;ONE&quot;,1),(&quot;ONE&quot;,1.1),(&quot;TWO&quot;,2), (&quot;TWO&quot;,2.2)]
  in S.fold (FL.classify FL.toList) input
fromList [(&quot;ONE&quot;,[1.1,1.0]),(&quot;TWO&quot;,[2.2,2.0])]
</pre><p><em>Since: 0.7.0</em></p></div></div><a href="#g:17" id="g:17"><h1>Unzipping</h1></a><div class="top"><p class="src"><a id="v:unzip" class="def">unzip</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a x -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m b y -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m (a, b) (x, y) <a href="src/Streamly.Internal.Data.Fold.html#unzip" class="link">Source</a> <a href="#v:unzip" class="selflink">#</a></p><div class="doc"><p>Send the elements of tuples in a stream of tuples through two different
 folds.</p><pre>
                          |-------Fold m a x--------|
---------stream of (a,b)--|                         |----m (x,y)
                          |-------Fold m b y--------|

</pre><p>This is the consumer side dual of the producer side <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-List.html#v:zip" title="GHC.List">zip</a></code> operation.</p><p><em>Since: 0.7.0</em></p></div></div><a href="#g:18" id="g:18"><h1>Running Folds</h1></a><div class="top"><p class="src"><a id="v:initialize" class="def">initialize</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; m (<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b) <a href="src/Streamly.Internal.Data.Fold.Types.html#initialize" class="link">Source</a> <a href="#v:initialize" class="selflink">#</a></p><div class="doc"><p>Run the initialization effect of a fold. The returned fold would use the
 value returned by this effect as its initial value.</p></div></div><div class="top"><p class="src"><a id="v:runStep" class="def">runStep</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; a -&gt; m (<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b) <a href="src/Streamly.Internal.Data.Fold.Types.html#runStep" class="link">Source</a> <a href="#v:runStep" class="selflink">#</a></p><div class="doc"><p>Run one step of a fold and store the accumulator as an initial value in
 the returned fold.</p></div></div><a href="#g:19" id="g:19"><h1>Nested Folds</h1></a><div class="top"><p class="src"><a id="v:duplicate" class="def">duplicate</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> m =&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a (<a href="Streamly-Internal-Data-Fold.html#t:Fold" title="Streamly.Internal.Data.Fold">Fold</a> m a b) <a href="src/Streamly.Internal.Data.Fold.Types.html#duplicate" class="link">Source</a> <a href="#v:duplicate" class="selflink">#</a></p><div class="doc"><p>Modify the fold such that when the fold is done, instead of returning the
 accumulator, it returns a fold. The returned fold starts from where we left
 i.e. it uses the last accumulator value as the initial value of the
 accumulator. Thus we can resume the fold later and feed it more input.</p><pre>&gt; do
    more &lt;- S.fold (FL.duplicate FL.sum) (S.enumerateFromTo 1 10)
    evenMore &lt;- S.fold (FL.duplicate more) (S.enumerateFromTo 11 20)
    S.fold evenMore (S.enumerateFromTo 21 30)
 465</pre><p><em>Since: 0.7.0</em></p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>
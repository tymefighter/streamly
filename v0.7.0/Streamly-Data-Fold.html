<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Streamly.Data.Fold</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Streamly.Data.Fold.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">streamly-v0.7.0: Beautiful Streaming, Concurrent and Reactive Composition</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) 2019 Composewell Technologies</td></tr><tr><th>License</th><td>BSD3</td></tr><tr><th>Maintainer</th><td>streamly@composewell.com</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Portability</th><td>GHC</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Streamly.Data.Fold</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Fold Type</a><ul><li><a href="#g:2">Full Folds</a></li><li><a href="#g:3">Full Folds (Monoidal)</a></li><li><a href="#g:4">Full Folds (To Containers)</a></li><li><a href="#g:5">Partial Folds</a></li></ul></li><li><a href="#g:6">Transformations</a><ul><li><a href="#g:7">Covariant Operations</a></li></ul></li><li><a href="#g:8">Distributing</a></li><li><a href="#g:9">Partitioning</a></li><li><a href="#g:10">Unzipping</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p><code><a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a></code> type represents an effectful action that consumes a value from an
 input stream and combines it with a single final value often called an
 accumulator, returning the resulting output accumulator.  Values from a
 stream can be <em>pushed</em> to the fold and consumed one at a time. It can also
 be called a consumer of stream or a sink.  It is a data representation of
 the standard <code><a href="Streamly-Prelude.html#v:foldl-39-" title="Streamly.Prelude">foldl'</a></code> function.  A <code><a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a></code> can be turned
 into an effect (<code>m b</code>) using <code><a href="Streamly-Prelude.html#v:fold" title="Streamly.Prelude">fold</a></code> by supplying it the
 input stream.</p><p>Using this representation multiple folds can be combined efficiently using
 combinators; a stream can then be supplied to the combined fold and it would
 distribute the input to constituent folds according to the composition.  For
 example, an applicative composition distributes the same input to the
 constituent folds and then combines the resulting fold outputs.  Similarly,
 a partitioning combinator divides the input among constituent folds.</p><h1>Performance Notes</h1><p><code><a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a></code> representation is more efficient than using streams when splitting
 streams.  <code>Fold m a b</code> can be considered roughly equivalent to a fold action
 <code>m b -&gt; t m a -&gt; m b</code> (where <code>t</code> is a stream type and <code>m</code> is a <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a></code>).
 Instead of using a <code><a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a></code> type one could just use a fold action of the shape
 <code>m b -&gt; t m a -&gt; m b</code> for folding streams. However, multiple such actions
 cannot be composed into a single fold function in an efficient manner.
 Using the <code><a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a></code> type we can efficiently split the stream across mutliple
 folds because it allows the compiler to perform stream fusion optimizations.</p><p>On the other hand, transformation operations (e.g. <code><a href="Streamly-Prelude.html#v:map" title="Streamly.Prelude">map</a></code>)
 on stream types can be as efficient as transformations on <code><a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a></code> (e.g.
 <code><a href="Streamly-Internal-Data-Fold-Types.html#v:lmap" title="Streamly.Internal.Data.Fold.Types">lmap</a></code>).</p><h1>Programmer Notes</h1><pre>import qualified Streamly.Data.Fold as FL</pre><p>More, not yet exposed, fold combinators can be found in
 <a href="Streamly-Internal-Data-Fold.html">Streamly.Internal.Data.Fold</a>.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Fold">Fold</a> m a b</li><li class="src short"><a href="#v:drain">drain</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a ()</li><li class="src short"><a href="#v:drainBy">drainBy</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m b) -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a ()</li><li class="src short"><a href="#v:last">last</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:length">length</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li class="src short"><a href="#v:sum">sum</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Num" title="Prelude">Num</a> a) =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a a</li><li class="src short"><a href="#v:product">product</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Num" title="Prelude">Num</a> a) =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a a</li><li class="src short"><a href="#v:maximumBy">maximumBy</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; a -&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Ord.html#t:Ordering" title="Data.Ord">Ordering</a>) -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:maximum">maximum</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> a) =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:minimumBy">minimumBy</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; a -&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Ord.html#t:Ordering" title="Data.Ord">Ordering</a>) -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:minimum">minimum</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> a) =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:mean">mean</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Fractional" title="Prelude">Fractional</a> a) =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a a</li><li class="src short"><a href="#v:variance">variance</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Fractional" title="Prelude">Fractional</a> a) =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a a</li><li class="src short"><a href="#v:stdDev">stdDev</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Numeric.html#t:Floating" title="Numeric">Floating</a> a) =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a a</li><li class="src short"><a href="#v:mconcat">mconcat</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> a) =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a a</li><li class="src short"><a href="#v:foldMap">foldMap</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> b) =&gt; (a -&gt; b) -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b</li><li class="src short"><a href="#v:foldMapM">foldMapM</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> b) =&gt; (a -&gt; m b) -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b</li><li class="src short"><a href="#v:toList">toList</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a [a]</li><li class="src short"><a href="#v:index">index</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:head">head</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:find">find</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:lookup">lookup</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; a -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m (a, b) (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> b)</li><li class="src short"><a href="#v:findIndex">findIndex</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a>)</li><li class="src short"><a href="#v:elemIndex">elemIndex</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; a -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a>)</li><li class="src short"><a href="#v:null">null</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:elem">elem</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; a -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:notElem">notElem</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; a -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:all">all</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:any">any</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:and">and</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:or">or</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:sequence">sequence</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a (m b) -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b</li><li class="src short"><a href="#v:mapM">mapM</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; m c) -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a c</li><li class="src short"><a href="#v:tee">tee</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a c -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a (b, c)</li><li class="src short"><a href="#v:distribute">distribute</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; [<a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b] -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a [b]</li><li class="src short"><a href="#v:partition">partition</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m b x -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m c y -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Either.html#t:Either" title="Data.Either">Either</a> b c) (x, y)</li><li class="src short"><a href="#v:unzip">unzip</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a x -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m b y -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m (a, b) (x, y)</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Fold Type</h1></a><div class="doc"><p>A <code><a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a></code> can be run over a stream using the <code><a href="Streamly-Prelude.html#v:fold" title="Streamly.Prelude">fold</a></code>
 combinator:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>S.fold FL.sum (S.enumerateFromTo 1 100)
</code></strong>5050
</pre></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Fold" class="def">Fold</a> m a b <a href="src/Streamly.Internal.Data.Fold.Types.html#Fold" class="link">Source</a> <a href="#t:Fold" class="selflink">#</a></p><div class="doc"><p>Represents a left fold over an input stream of values of type <code>a</code> to a
 single value of type <code>b</code> in <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a></code> <code>m</code>.</p><p>The fold uses an intermediate state <code>s</code> as accumulator. The <code>step</code> function
 updates the state and returns the new updated state. When the fold is done
 the final result of the fold is extracted from the intermediate state
 representation using the <code>extract</code> function.</p><p><em>Since: 0.7.0</em></p></div><div class="subs instances"><details id="i:Fold" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Fold:Functor:1"></span> <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> m =&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> (<a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a)</span> <a href="src/Streamly.Internal.Data.Fold.Types.html#line-83" class="link">Source</a> <a href="#t:Fold" class="selflink">#</a></td><td class="doc"><p>Maps a function on the output of the fold (the type <code>b</code>).</p></td></tr><tr><td colspan="2"><details id="i:id:Fold:Functor:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Streamly-Internal-Data-Fold-Types.html">Streamly.Internal.Data.Fold.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a0 -&gt; b) -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a a0 -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a0 -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a a0 <a href="#v:-60--36-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Fold:Applicative:2"></span> <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> m =&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> (<a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a)</span> <a href="src/Streamly.Internal.Data.Fold.Types.html#line-94" class="link">Source</a> <a href="#t:Fold" class="selflink">#</a></td><td class="doc"><p>The fold resulting from <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Applicative.html#v:-60--42--62-" title="Control.Applicative">&lt;*&gt;</a></code> distributes its input to both the argument
 folds and combines their output using the supplied function.</p></td></tr><tr><td colspan="2"><details id="i:id:Fold:Applicative:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Streamly-Internal-Data-Fold-Types.html">Streamly.Internal.Data.Fold.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pure">pure</a> :: a0 -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a a0 <a href="#v:pure" class="selflink">#</a></p><p class="src"><a href="#v:-60--42--62-">(&lt;*&gt;)</a> :: <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a (a0 -&gt; b) -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a a0 -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:-60--42--62-" class="selflink">#</a></p><p class="src"><a href="#v:liftA2">liftA2</a> :: (a0 -&gt; b -&gt; c) -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a a0 -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a c <a href="#v:liftA2" class="selflink">#</a></p><p class="src"><a href="#v:-42--62-">(*&gt;)</a> :: <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a a0 -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:-42--62-" class="selflink">#</a></p><p class="src"><a href="#v:-60--42-">(&lt;*)</a> :: <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a a0 -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a a0 <a href="#v:-60--42-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Fold:Floating:3"></span> (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Numeric.html#t:Floating" title="Numeric">Floating</a> b) =&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Numeric.html#t:Floating" title="Numeric">Floating</a> (<a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b)</span> <a href="src/Streamly.Internal.Data.Fold.Types.html#line-161" class="link">Source</a> <a href="#t:Fold" class="selflink">#</a></td><td class="doc"><p>Combines the fold outputs using their <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Numeric.html#t:Floating" title="Numeric">Floating</a></code> instances.</p></td></tr><tr><td colspan="2"><details id="i:id:Fold:Floating:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Streamly-Internal-Data-Fold-Types.html">Streamly.Internal.Data.Fold.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pi">pi</a> :: <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:pi" class="selflink">#</a></p><p class="src"><a href="#v:exp">exp</a> :: <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:exp" class="selflink">#</a></p><p class="src"><a href="#v:log">log</a> :: <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:log" class="selflink">#</a></p><p class="src"><a href="#v:sqrt">sqrt</a> :: <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:sqrt" class="selflink">#</a></p><p class="src"><a href="#v:-42--42-">(**)</a> :: <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:-42--42-" class="selflink">#</a></p><p class="src"><a href="#v:logBase">logBase</a> :: <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:logBase" class="selflink">#</a></p><p class="src"><a href="#v:sin">sin</a> :: <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:sin" class="selflink">#</a></p><p class="src"><a href="#v:cos">cos</a> :: <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:cos" class="selflink">#</a></p><p class="src"><a href="#v:tan">tan</a> :: <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:tan" class="selflink">#</a></p><p class="src"><a href="#v:asin">asin</a> :: <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:asin" class="selflink">#</a></p><p class="src"><a href="#v:acos">acos</a> :: <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:acos" class="selflink">#</a></p><p class="src"><a href="#v:atan">atan</a> :: <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:atan" class="selflink">#</a></p><p class="src"><a href="#v:sinh">sinh</a> :: <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:sinh" class="selflink">#</a></p><p class="src"><a href="#v:cosh">cosh</a> :: <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:cosh" class="selflink">#</a></p><p class="src"><a href="#v:tanh">tanh</a> :: <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:tanh" class="selflink">#</a></p><p class="src"><a href="#v:asinh">asinh</a> :: <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:asinh" class="selflink">#</a></p><p class="src"><a href="#v:acosh">acosh</a> :: <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:acosh" class="selflink">#</a></p><p class="src"><a href="#v:atanh">atanh</a> :: <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:atanh" class="selflink">#</a></p><p class="src"><a href="#v:log1p">log1p</a> :: <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:log1p" class="selflink">#</a></p><p class="src"><a href="#v:expm1">expm1</a> :: <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:expm1" class="selflink">#</a></p><p class="src"><a href="#v:log1pexp">log1pexp</a> :: <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:log1pexp" class="selflink">#</a></p><p class="src"><a href="#v:log1mexp">log1mexp</a> :: <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:log1mexp" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Fold:Fractional:4"></span> (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Fractional" title="Prelude">Fractional</a> b) =&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Fractional" title="Prelude">Fractional</a> (<a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b)</span> <a href="src/Streamly.Internal.Data.Fold.Types.html#line-150" class="link">Source</a> <a href="#t:Fold" class="selflink">#</a></td><td class="doc"><p>Combines the fold outputs (type <code>b</code>) using their <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Fractional" title="Prelude">Fractional</a></code> instances.</p></td></tr><tr><td colspan="2"><details id="i:id:Fold:Fractional:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Streamly-Internal-Data-Fold-Types.html">Streamly.Internal.Data.Fold.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-47-">(/)</a> :: <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:-47-" class="selflink">#</a></p><p class="src"><a href="#v:recip">recip</a> :: <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:recip" class="selflink">#</a></p><p class="src"><a href="#v:fromRational">fromRational</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Rational" title="Prelude">Rational</a> -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:fromRational" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Fold:Num:5"></span> (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Num" title="Prelude">Num</a> b) =&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Num" title="Prelude">Num</a> (<a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b)</span> <a href="src/Streamly.Internal.Data.Fold.Types.html#line-127" class="link">Source</a> <a href="#t:Fold" class="selflink">#</a></td><td class="doc"><p>Combines the fold outputs (type <code>b</code>) using their <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Num" title="Prelude">Num</a></code> instances.</p></td></tr><tr><td colspan="2"><details id="i:id:Fold:Num:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Streamly-Internal-Data-Fold-Types.html">Streamly.Internal.Data.Fold.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-43-">(+)</a> :: <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:-43-" class="selflink">#</a></p><p class="src"><a href="#v:-45-">(-)</a> :: <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:-45-" class="selflink">#</a></p><p class="src"><a href="#v:-42-">(*)</a> :: <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:-42-" class="selflink">#</a></p><p class="src"><a href="#v:negate">negate</a> :: <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:negate" class="selflink">#</a></p><p class="src"><a href="#v:abs">abs</a> :: <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:abs" class="selflink">#</a></p><p class="src"><a href="#v:signum">signum</a> :: <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:signum" class="selflink">#</a></p><p class="src"><a href="#v:fromInteger">fromInteger</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Integer" title="Prelude">Integer</a> -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:fromInteger" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Fold:Semigroup:6"></span> (<a href="Streamly.html#t:Semigroup" title="Streamly">Semigroup</a> b, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; <a href="Streamly.html#t:Semigroup" title="Streamly">Semigroup</a> (<a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b)</span> <a href="src/Streamly.Internal.Data.Fold.Types.html#line-113" class="link">Source</a> <a href="#t:Fold" class="selflink">#</a></td><td class="doc"><p>Combines the outputs of the folds (the type <code>b</code>) using their <code><a href="Streamly.html#t:Semigroup" title="Streamly">Semigroup</a></code>
 instances.</p></td></tr><tr><td colspan="2"><details id="i:id:Fold:Semigroup:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Streamly-Internal-Data-Fold-Types.html">Streamly.Internal.Data.Fold.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-60--62-">(&lt;&gt;)</a> :: <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:-60--62-" class="selflink">#</a></p><p class="src"><a href="#v:sconcat">sconcat</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> (<a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b) -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:sconcat" class="selflink">#</a></p><p class="src"><a href="#v:stimes">stimes</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Integral" title="Prelude">Integral</a> b0 =&gt; b0 -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:stimes" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Fold:Monoid:7"></span> (<a href="Streamly.html#t:Semigroup" title="Streamly">Semigroup</a> b, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> b, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> (<a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b)</span> <a href="src/Streamly.Internal.Data.Fold.Types.html#line-119" class="link">Source</a> <a href="#t:Fold" class="selflink">#</a></td><td class="doc"><p>Combines the outputs of the folds (the type <code>b</code>) using their <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a></code>
 instances.</p></td></tr><tr><td colspan="2"><details id="i:id:Fold:Monoid:7"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Streamly-Internal-Data-Fold-Types.html">Streamly.Internal.Data.Fold.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mempty">mempty</a> :: <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:mempty" class="selflink">#</a></p><p class="src"><a href="#v:mappend">mappend</a> :: <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:mappend" class="selflink">#</a></p><p class="src"><a href="#v:mconcat">mconcat</a> :: [<a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b] -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="#v:mconcat" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><a href="#g:2" id="g:2"><h2>Full Folds</h2></a><div class="top"><p class="src"><a id="v:drain" class="def">drain</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a () <a href="src/Streamly.Internal.Data.Fold.html#drain" class="link">Source</a> <a href="#v:drain" class="selflink">#</a></p><div class="doc"><p>A fold that drains all its input, running the effects and discarding the
 results.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:drainBy" class="def">drainBy</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; m b) -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a () <a href="src/Streamly.Internal.Data.Fold.html#drainBy" class="link">Source</a> <a href="#v:drainBy" class="selflink">#</a></p><div class="doc"><pre>drainBy f = lmapM f drain</pre><p>Drain all input after passing it through a monadic function. This is the
 dual of mapM_ on stream producers.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:last" class="def">last</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> a) <a href="src/Streamly.Internal.Data.Fold.html#last" class="link">Source</a> <a href="#v:last" class="selflink">#</a></p><div class="doc"><p>Extract the last element of the input stream, if any.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:length" class="def">length</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="src/Streamly.Internal.Data.Fold.html#length" class="link">Source</a> <a href="#v:length" class="selflink">#</a></p><div class="doc"><p>Determine the length of the input stream.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:sum" class="def">sum</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Num" title="Prelude">Num</a> a) =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a a <a href="src/Streamly.Internal.Data.Fold.html#sum" class="link">Source</a> <a href="#v:sum" class="selflink">#</a></p><div class="doc"><p>Determine the sum of all elements of a stream of numbers. Returns additive
 identity (<code>0</code>) when the stream is empty. Note that this is not numerically
 stable for floating point numbers.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:product" class="def">product</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Num" title="Prelude">Num</a> a) =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a a <a href="src/Streamly.Internal.Data.Fold.html#product" class="link">Source</a> <a href="#v:product" class="selflink">#</a></p><div class="doc"><p>Determine the product of all elements of a stream of numbers. Returns
 multiplicative identity (<code>1</code>) when the stream is empty.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:maximumBy" class="def">maximumBy</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; a -&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Ord.html#t:Ordering" title="Data.Ord">Ordering</a>) -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> a) <a href="src/Streamly.Internal.Data.Fold.html#maximumBy" class="link">Source</a> <a href="#v:maximumBy" class="selflink">#</a></p><div class="doc"><p>Determine the maximum element in a stream using the supplied comparison
 function.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:maximum" class="def">maximum</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> a) =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> a) <a href="src/Streamly.Internal.Data.Fold.html#maximum" class="link">Source</a> <a href="#v:maximum" class="selflink">#</a></p><div class="doc"><pre>maximum = <code><a href="Streamly-Data-Fold.html#v:maximumBy" title="Streamly.Data.Fold">maximumBy</a></code> compare
</pre><p>Determine the maximum element in a stream.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:minimumBy" class="def">minimumBy</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; a -&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Ord.html#t:Ordering" title="Data.Ord">Ordering</a>) -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> a) <a href="src/Streamly.Internal.Data.Fold.html#minimumBy" class="link">Source</a> <a href="#v:minimumBy" class="selflink">#</a></p><div class="doc"><p>Computes the minimum element with respect to the given comparison function</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:minimum" class="def">minimum</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> a) =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> a) <a href="src/Streamly.Internal.Data.Fold.html#minimum" class="link">Source</a> <a href="#v:minimum" class="selflink">#</a></p><div class="doc"><p>Determine the minimum element in a stream using the supplied comparison
 function.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:mean" class="def">mean</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Fractional" title="Prelude">Fractional</a> a) =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a a <a href="src/Streamly.Internal.Data.Fold.html#mean" class="link">Source</a> <a href="#v:mean" class="selflink">#</a></p><div class="doc"><p>Compute a numerically stable arithmetic mean of all elements in the input
 stream.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:variance" class="def">variance</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Fractional" title="Prelude">Fractional</a> a) =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a a <a href="src/Streamly.Internal.Data.Fold.html#variance" class="link">Source</a> <a href="#v:variance" class="selflink">#</a></p><div class="doc"><p>Compute a numerically stable (population) variance over all elements in
 the input stream.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:stdDev" class="def">stdDev</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Numeric.html#t:Floating" title="Numeric">Floating</a> a) =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a a <a href="src/Streamly.Internal.Data.Fold.html#stdDev" class="link">Source</a> <a href="#v:stdDev" class="selflink">#</a></p><div class="doc"><p>Compute a numerically stable (population) standard deviation over all
 elements in the input stream.</p><p><em>Since: 0.7.0</em></p></div></div><a href="#g:3" id="g:3"><h2>Full Folds (Monoidal)</h2></a><div class="top"><p class="src"><a id="v:mconcat" class="def">mconcat</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> a) =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a a <a href="src/Streamly.Internal.Data.Fold.html#mconcat" class="link">Source</a> <a href="#v:mconcat" class="selflink">#</a></p><div class="doc"><p>Fold an input stream consisting of monoidal elements using <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Monoid.html#v:mappend" title="Data.Monoid">mappend</a></code>
 and <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Monoid.html#v:mempty" title="Data.Monoid">mempty</a></code>.</p><pre>S.fold FL.mconcat (S.map Sum $ S.enumerateFromTo 1 10)</pre><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:foldMap" class="def">foldMap</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> b) =&gt; (a -&gt; b) -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="src/Streamly.Internal.Data.Fold.html#foldMap" class="link">Source</a> <a href="#v:foldMap" class="selflink">#</a></p><div class="doc"><pre>foldMap f = map f mconcat</pre><p>Make a fold from a pure function that folds the output of the function
 using <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Monoid.html#v:mappend" title="Data.Monoid">mappend</a></code> and <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Monoid.html#v:mempty" title="Data.Monoid">mempty</a></code>.</p><pre>S.fold (FL.foldMap Sum) $ S.enumerateFromTo 1 10</pre><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:foldMapM" class="def">foldMapM</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> b) =&gt; (a -&gt; m b) -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="src/Streamly.Internal.Data.Fold.html#foldMapM" class="link">Source</a> <a href="#v:foldMapM" class="selflink">#</a></p><div class="doc"><pre>foldMapM f = mapM f mconcat</pre><p>Make a fold from a monadic function that folds the output of the function
 using <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Monoid.html#v:mappend" title="Data.Monoid">mappend</a></code> and <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Monoid.html#v:mempty" title="Data.Monoid">mempty</a></code>.</p><pre>S.fold (FL.foldMapM (return . Sum)) $ S.enumerateFromTo 1 10</pre><p><em>Since: 0.7.0</em></p></div></div><a href="#g:4" id="g:4"><h2>Full Folds (To Containers)</h2></a><div class="doc"><p>Avoid using these folds in scalable or performance critical
 applications, they buffer all the input in GC memory which can be
 detrimental to performance if the input is large.</p></div><div class="top"><p class="src"><a id="v:toList" class="def">toList</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a [a] <a href="src/Streamly.Internal.Data.Fold.html#toList" class="link">Source</a> <a href="#v:toList" class="selflink">#</a></p><div class="doc"><p>Folds the input stream to a list.</p><p><em>Warning!</em> working on large lists accumulated as buffers in memory could be
 very inefficient, consider using <a href="Streamly-Array.html">Streamly.Array</a> instead.</p><p><em>Since: 0.7.0</em></p></div></div><a href="#g:5" id="g:5"><h2>Partial Folds</h2></a><div class="top"><p class="src"><a id="v:index" class="def">index</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> a) <a href="src/Streamly.Internal.Data.Fold.html#index" class="link">Source</a> <a href="#v:index" class="selflink">#</a></p><div class="doc"><p>Lookup the element at the given index.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:head" class="def">head</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> a) <a href="src/Streamly.Internal.Data.Fold.html#head" class="link">Source</a> <a href="#v:head" class="selflink">#</a></p><div class="doc"><p>Extract the first element of the stream, if any.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:find" class="def">find</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> a) <a href="src/Streamly.Internal.Data.Fold.html#find" class="link">Source</a> <a href="#v:find" class="selflink">#</a></p><div class="doc"><p>Returns the first element that satisfies the given predicate.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:lookup" class="def">lookup</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; a -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m (a, b) (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> b) <a href="src/Streamly.Internal.Data.Fold.html#lookup" class="link">Source</a> <a href="#v:lookup" class="selflink">#</a></p><div class="doc"><p>In a stream of (key-value) pairs <code>(a, b)</code>, return the value <code>b</code> of the
 first pair where the key equals the given value <code>a</code>.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:findIndex" class="def">findIndex</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a>) <a href="src/Streamly.Internal.Data.Fold.html#findIndex" class="link">Source</a> <a href="#v:findIndex" class="selflink">#</a></p><div class="doc"><p>Returns the first index that satisfies the given predicate.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:elemIndex" class="def">elemIndex</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; a -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Int.html#t:Int" title="Data.Int">Int</a>) <a href="src/Streamly.Internal.Data.Fold.html#elemIndex" class="link">Source</a> <a href="#v:elemIndex" class="selflink">#</a></p><div class="doc"><p>Returns the first index where a given value is found in the stream.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:null" class="def">null</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.Data.Fold.html#null" class="link">Source</a> <a href="#v:null" class="selflink">#</a></p><div class="doc"><p>Return <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#v:True" title="Data.Bool">True</a></code> if the input stream is empty.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:elem" class="def">elem</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; a -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.Data.Fold.html#elem" class="link">Source</a> <a href="#v:elem" class="selflink">#</a></p><div class="doc"><p>Return <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#v:True" title="Data.Bool">True</a></code> if the given element is present in the stream.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:notElem" class="def">notElem</a> :: (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m) =&gt; a -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.Data.Fold.html#notElem" class="link">Source</a> <a href="#v:notElem" class="selflink">#</a></p><div class="doc"><p>Returns <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#v:True" title="Data.Bool">True</a></code> if the given element is not present in the stream.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:all" class="def">all</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.Data.Fold.html#all" class="link">Source</a> <a href="#v:all" class="selflink">#</a></p><div class="doc"><pre>all p = lmap p and</pre><p>| Returns <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#v:True" title="Data.Bool">True</a></code> if all elements of a stream satisfy a predicate.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:any" class="def">any</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (a -&gt; <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.Data.Fold.html#any" class="link">Source</a> <a href="#v:any" class="selflink">#</a></p><div class="doc"><pre>any p = lmap p or</pre><p>| Returns <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#v:True" title="Data.Bool">True</a></code> if any of the elements of a stream satisfies a predicate.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:and" class="def">and</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.Data.Fold.html#and" class="link">Source</a> <a href="#v:and" class="selflink">#</a></p><div class="doc"><p>Returns <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#v:True" title="Data.Bool">True</a></code> if all elements are <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#v:True" title="Data.Bool">True</a></code>, <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#v:False" title="Data.Bool">False</a></code> otherwise</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:or" class="def">or</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Streamly.Internal.Data.Fold.html#or" class="link">Source</a> <a href="#v:or" class="selflink">#</a></p><div class="doc"><p>Returns <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#v:True" title="Data.Bool">True</a></code> if any element is <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#v:True" title="Data.Bool">True</a></code>, <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Bool.html#v:False" title="Data.Bool">False</a></code> otherwise</p><p><em>Since: 0.7.0</em></p></div></div><a href="#g:6" id="g:6"><h1>Transformations</h1></a><div class="doc"><p>Unlike stream producer types (e.g. <code>SerialT m a</code>) which have only
 output side, folds have an input side as well as an output side.  In the
 type <code>Fold m a b</code>, the input type is <code>a</code> and the output type is <code>b</code>.
 Transformations can be applied either on the input side or on the output
 side. The <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a></code> instance of a fold maps on the output of the fold:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>S.fold (fmap show FL.sum) (S.enumerateFromTo 1 100)
</code></strong>&quot;5050&quot;
</pre><p>However, the input side or contravariant transformations are more
 interesting for folds.  The following sections describe the input
 transformation operations on a fold.  The names of the operations are
 consistent with their covariant counterparts in <a href="Streamly-Prelude.html">Streamly.Prelude</a>, the
 only difference is that they are prefixed with <code>l</code> which stands for
 <code>left</code> assuming left side is the input side, notice that in <code>Fold m a b</code>
 the type variable <code>a</code> is on the left side.</p></div><a href="#g:7" id="g:7"><h2>Covariant Operations</h2></a><div class="top"><p class="src"><a id="v:sequence" class="def">sequence</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a (m b) -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b <a href="src/Streamly.Internal.Data.Fold.html#sequence" class="link">Source</a> <a href="#v:sequence" class="selflink">#</a></p><div class="doc"><p>Flatten the monadic output of a fold to pure output.</p><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:mapM" class="def">mapM</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; (b -&gt; m c) -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a c <a href="src/Streamly.Internal.Data.Fold.html#mapM" class="link">Source</a> <a href="#v:mapM" class="selflink">#</a></p><div class="doc"><p>Map a monadic function on the output of a fold.</p><p><em>Since: 0.7.0</em></p></div></div><a href="#g:8" id="g:8"><h1>Distributing</h1></a><div class="doc"><p>The <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a></code> instance of a distributing <code><a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a></code> distributes one copy
 of the stream to each fold and combines the results using a function.</p><pre>
                |-------Fold m a b--------|
---stream m a---|                         |---m (b,c,...)
                |-------Fold m a c--------|
                |                         |
                           ...
</pre><p>To compute the average of numbers in a stream without going throught he
 stream twice:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>let avg = (/) &lt;$&gt; FL.sum &lt;*&gt; fmap fromIntegral FL.length
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>S.fold avg (S.enumerateFromTo 1.0 100.0)
</code></strong>50.5
</pre><p>The <code><a href="Streamly.html#t:Semigroup" title="Streamly">Semigroup</a></code> and <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a></code> instances of a distributing fold distribute
 the input to both the folds and combines the outputs using Monoid or
 Semigroup instances of the output types:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Data.Monoid (Sum)
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>S.fold (FL.head &lt;&gt; FL.last) (fmap Sum $ S.enumerateFromTo 1.0 100.0)
</code></strong>Just (Sum {getSum = 101.0})
</pre><p>The <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Num" title="Prelude">Num</a></code>, <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Numeric.html#t:Floating" title="Numeric">Floating</a></code>, and <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Prelude.html#t:Fractional" title="Prelude">Fractional</a></code> instances work in the same way.</p></div><div class="top"><p class="src"><a id="v:tee" class="def">tee</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a c -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a (b, c) <a href="src/Streamly.Internal.Data.Fold.html#tee" class="link">Source</a> <a href="#v:tee" class="selflink">#</a></p><div class="doc"><p>Distribute one copy of the stream to each fold and zip the results.</p><pre>                |-------Fold m a b--------|
---stream m a---|                         |---m (b,c)
                |-------Fold m a c--------|
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>S.fold (FL.tee FL.sum FL.length) (S.enumerateFromTo 1.0 100.0)
</code></strong>(5050.0,100)
</pre><p><em>Since: 0.7.0</em></p></div></div><div class="top"><p class="src"><a id="v:distribute" class="def">distribute</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; [<a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a b] -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a [b] <a href="src/Streamly.Internal.Data.Fold.html#distribute" class="link">Source</a> <a href="#v:distribute" class="selflink">#</a></p><div class="doc"><p>Distribute one copy of the stream to each fold and collect the results in
 a container.</p><pre>
                |-------Fold m a b--------|
---stream m a---|                         |---m [b]
                |-------Fold m a b--------|
                |                         |
                           ...
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>S.fold (FL.distribute [FL.sum, FL.length]) (S.enumerateFromTo 1 5)
</code></strong>[15,5]
</pre><p>This is the consumer side dual of the producer side <code><a href="Streamly-Data-Fold.html#v:sequence" title="Streamly.Data.Fold">sequence</a></code> operation.</p><p><em>Since: 0.7.0</em></p></div></div><a href="#g:9" id="g:9"><h1>Partitioning</h1></a><div class="doc"><p>Direct items in the input stream to different folds using a binary
 fold selector.</p></div><div class="top"><p class="src"><a id="v:partition" class="def">partition</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m b x -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m c y -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m (<a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Either.html#t:Either" title="Data.Either">Either</a> b c) (x, y) <a href="src/Streamly.Internal.Data.Fold.html#partition" class="link">Source</a> <a href="#v:partition" class="selflink">#</a></p><div class="doc"><p>Compose two folds such that the combined fold accepts a stream of <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Either.html#t:Either" title="Data.Either">Either</a></code>
 and routes the <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Either.html#v:Left" title="Data.Either">Left</a></code> values to the first fold and <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-Either.html#v:Right" title="Data.Either">Right</a></code> values to the
 second fold.</p><pre>partition = partitionBy id</pre><p><em>Since: 0.7.0</em></p></div></div><a href="#g:10" id="g:10"><h1>Unzipping</h1></a><div class="top"><p class="src"><a id="v:unzip" class="def">unzip</a> :: <a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> m =&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m a x -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m b y -&gt; <a href="Streamly-Data-Fold.html#t:Fold" title="Streamly.Data.Fold">Fold</a> m (a, b) (x, y) <a href="src/Streamly.Internal.Data.Fold.html#unzip" class="link">Source</a> <a href="#v:unzip" class="selflink">#</a></p><div class="doc"><p>Send the elements of tuples in a stream of tuples through two different
 folds.</p><pre>
                          |-------Fold m a x--------|
---------stream of (a,b)--|                         |----m (x,y)
                          |-------Fold m b y--------|

</pre><p>This is the consumer side dual of the producer side <code><a href="https://hackage.haskell.org/package/base-4.12.0.0/docs/GHC-List.html#v:zip" title="GHC.List">zip</a></code> operation.</p><p><em>Since: 0.7.0</em></p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>